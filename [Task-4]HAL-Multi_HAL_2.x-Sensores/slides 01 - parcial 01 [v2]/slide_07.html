<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Slide 07 - Comunicação Serial</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        /* --- CORE STYLES --- */
        html, body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: white;
            width: 100%;
            height: 100%;
        }

        .font-mono { font-family: 'JetBrains Mono', monospace; }

        .slide-container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        /* --- CONSOLE / TERMINAL STYLES --- */
        .console-panel {
            background-color: #1e1e1e; /* VS Code dark bg */
            border: 1px solid #333;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            padding: 0;
            color: #d4d4d4;
            font-size: 0.8rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            height: 100%;
        }
        
        .console-header {
            background-color: #252526;
            display: flex;
            align-items: center;
            border-bottom: 1px solid #333;
            padding: 8px 12px;
            flex-shrink: 0;
        }
        
        .console-body {
            padding: 12px;
            overflow-y: auto;
            flex-grow: 1;
        }
        
        .console-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }

        /* Terminal Syntax Highlighting */
        .cmd-prompt { color: #9cdcfe; margin-right: 8px; font-weight: bold; }
        .log-time { color: #569cd6; margin-right: 10px; }
        .log-success { color: #4ec9b0; }
        .log-warn { color: #cca700; }
        
        /* JSON Highlighting */
        .json-key { color: #9cdcfe; }   /* Light Blue */
        .json-string { color: #ce9178; } /* Orange/Red */
        .json-number { color: #b5cea8; } /* Light Green */
        .json-bool { color: #569cd6; }   /* Blue */
        .json-brace { color: #ffd700; }  /* Gold */

        /* --- CARD STYLES --- */
        .glass-bg {
            background-color: rgba(30, 41, 59, 0.6); /* Slate 800 with opacity */
            backdrop-filter: blur(8px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .glass-bg:hover {
            border-color: rgba(255, 255, 255, 0.1);
            background-color: rgba(30, 41, 59, 0.8);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.2);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #1e1e1e; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body>
    <div class="slide-container bg-gray-900 text-white relative">
        
        <div class="pt-8 px-6 md:px-12 flex flex-col md:flex-row items-start md:items-center justify-between z-10 mb-6 shrink-0">
            <div>
                <div class="flex items-center space-x-3 mb-1">
                    <span class="px-2 py-0.5 bg-yellow-900/40 text-yellow-200 text-xs font-mono rounded font-bold uppercase tracking-wider border border-yellow-500/30">Serial</span>
                    <span class="text-gray-500 text-sm font-mono tracking-widest">COMUNICAÇÃO & PROTOCOLO</span>
                </div>
                <h1 class="text-3xl md:text-4xl font-bold text-white tracking-tight">Comunicação Serial e Protocolo</h1>
            </div>
            
            <div class="flex items-center space-x-4 mt-4 md:mt-0 bg-gray-800 p-2 rounded-lg border border-gray-700">
                <i class="fas fa-microchip text-gray-400 text-2xl"></i>
                <div class="h-6 w-px bg-gray-600"></div>
                <i class="fas fa-exchange-alt text-yellow-400 text-2xl"></i>
            </div>
        </div>

        <div class="flex-1 px-6 md:px-12 pb-12 grid grid-cols-1 lg:grid-cols-2 gap-8 z-10 overflow-y-auto">
            
            <div class="flex flex-col space-y-6">
                
                <div class="glass-bg p-6 border-l-4 border-yellow-500">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-lg bg-yellow-900/40 flex items-center justify-center mr-4 text-yellow-400 border border-yellow-500/20">
                            <i class="fas fa-check-double text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-100">Testes de Sanidade</h3>
                    </div>
                    <ul class="space-y-4 pl-2">
                        <li class="flex items-start">
                            <div class="mt-1 mr-3 text-yellow-500"><i class="fas fa-terminal text-sm"></i></div>
                            <div>
                                <p class="text-sm text-gray-200 font-bold mb-0.5">Validação via Shell (ADB)</p>
                                <p class="text-xs text-gray-400 leading-relaxed">Verificação manual da porta <code class="bg-gray-800 px-1 py-0.5 rounded text-yellow-200 font-mono border border-gray-700">/dev/ttyUSB0</code> para garantir permissões de leitura/escrita antes da integração.</p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <div class="mt-1 mr-3 text-yellow-500"><i class="fas fa-cog text-sm"></i></div>
                            <div>
                                <p class="text-sm text-gray-200 font-bold mb-0.5">Configuração Serial</p>
                                <p class="text-xs text-gray-400">Baudrate: <span class="text-yellow-200 font-mono">115200</span>, 8N1 (8 bits, No Parity, 1 Stop Bit), Raw Mode.</p>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="glass-bg p-6 border-l-4 border-blue-500">
                    <div class="flex items-center mb-4">
                        <div class="w-10 h-10 rounded-lg bg-blue-900/40 flex items-center justify-center mr-4 text-blue-400 border border-blue-500/20">
                            <i class="fas fa-file-code text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold text-gray-100">Protocolo JSON</h3>
                    </div>
                    <p class="text-sm text-gray-300 mb-4 leading-relaxed">Formato estruturado leve para troca de dados entre o ESP32 e o Android HAL.</p>
                    
                    <div class="grid grid-cols-2 gap-3">
                        <div class="bg-gray-800/50 p-3 rounded border border-gray-700/50 hover:border-blue-500/30 transition-colors">
                            <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">Partículas</span>
                                <i class="fas fa-wind text-blue-400/50 text-xs"></i>
                            </div>
                            <p class="text-sm text-blue-200 font-mono">pm25, pm10</p>
                        </div>
                        <div class="bg-gray-800/50 p-3 rounded border border-gray-700/50 hover:border-blue-500/30 transition-colors">
                             <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">Gases</span>
                                <i class="fas fa-smog text-blue-400/50 text-xs"></i>
                            </div>
                            <p class="text-sm text-blue-200 font-mono">co_ppm, lpg_ppm</p>
                        </div>
                        <div class="bg-gray-800/50 p-3 rounded border border-gray-700/50 hover:border-blue-500/30 transition-colors">
                             <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">Ambiente</span>
                                <i class="fas fa-thermometer-half text-blue-400/50 text-xs"></i>
                            </div>
                            <p class="text-sm text-blue-200 font-mono">temp_c, humid_p</p>
                        </div>
                        <div class="bg-gray-800/50 p-3 rounded border border-gray-700/50 hover:border-blue-500/30 transition-colors">
                             <div class="flex items-center justify-between mb-1">
                                <span class="text-xs text-gray-500 font-bold uppercase tracking-wider">Metadados</span>
                                <i class="fas fa-tag text-blue-400/50 text-xs"></i>
                            </div>
                            <p class="text-sm text-blue-200 font-mono">type, src, ts</p>
                        </div>
                    </div>
                </div>

                <div class="glass-bg p-4 flex flex-col sm:flex-row items-center justify-between gap-4">
                    <div>
                        <h4 class="text-sm font-bold text-gray-300 mb-1"><i class="fas fa-keyboard mr-2 text-gray-500"></i>Comandos Suportados</h4>
                        <p class="text-xs text-gray-500">Enviados via Serial para o Firmware</p>
                    </div>
                    <div class="flex space-x-2">
                        <span class="px-2 py-1 bg-green-900/30 text-green-400 rounded text-xs font-mono border border-green-500/30">GET DATA</span>
                        <span class="px-2 py-1 bg-purple-900/30 text-purple-400 rounded text-xs font-mono border border-purple-500/30">GET STATUS</span>
                        <span class="px-2 py-1 bg-orange-900/30 text-orange-400 rounded text-xs font-mono border border-orange-500/30">SET CALIB</span>
                    </div>
                </div>
            </div>

            <div class="flex flex-col space-y-6">
                
                <div class="flex flex-col h-1/3 min-h-[160px]">
                    <div class="flex items-center justify-between mb-2 px-1">
                        <span class="text-xs text-gray-400 font-mono font-bold uppercase tracking-widest">Terminal 1: Setup</span>
                    </div>
                    <div class="console-panel">
                        <div class="console-header">
                            <div class="console-dot bg-red-500"></div>
                            <div class="console-dot bg-yellow-500"></div>
                            <div class="console-dot bg-green-500"></div>
                            <div class="ml-auto text-xs text-gray-500 font-mono">adb shell (root)</div>
                        </div>
                        <div class="console-body">
                            <div class="log-line mb-2">
                                <span class="cmd-prompt">nio:/ #</span>
                                <span>ls -l /dev/ttyUSB*</span>
                            </div>
                            <div class="log-line text-gray-400 mb-2 pl-4 border-l-2 border-gray-700">
                                crw-rw---- 1 system system 188, 0 2024-02-05 10:00 <span class="text-yellow-200">/dev/ttyUSB0</span>
                            </div>
                            <div class="log-line mb-2">
                                <span class="cmd-prompt">nio:/ #</span>
                                <span>stty -F /dev/ttyUSB0 115200 raw -echo</span>
                            </div>
                            <div class="log-line">
                                <span class="cmd-prompt">nio:/ #</span>
                                <span>cat /dev/ttyUSB0</span>
                            </div>
                            <div class="log-line text-yellow-300 italic mt-2 animate-pulse">
                                Waiting for data stream...
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex flex-col flex-1 min-h-[300px]">
                    <div class="flex items-center justify-between mb-2 px-1">
                         <span class="text-xs text-gray-400 font-mono font-bold uppercase tracking-widest">Terminal 2: Trigger & Response</span>
                    </div>
                    <div class="console-panel border-blue-500/30">
                        <div class="console-header">
                            <div class="console-dot bg-red-500"></div>
                            <div class="console-dot bg-yellow-500"></div>
                            <div class="console-dot bg-green-500"></div>
                            <div class="ml-auto text-xs text-blue-400 font-mono">Interactive Test</div>
                        </div>
                        <div class="console-body flex flex-col h-full">
                            <div class="log-line mb-4">
                                <span class="cmd-prompt">nio:/ #</span>
                                <span>echo <span class="text-green-400">"GET DATA"</span> > /dev/ttyUSB0</span>
                            </div>
                            
                            <div class="text-xs text-gray-500 border-b border-gray-700 pb-1 mb-2 font-bold uppercase">RX Buffer (JSON)</div>
                            
                            <div class="font-mono text-sm leading-relaxed pl-2">
                                <span class="json-brace">{</span><br/>
                                &nbsp;&nbsp;<span class="json-key">"type"</span>: <span class="json-string">"data"</span>,<br/>
                                &nbsp;&nbsp;<span class="json-key">"src"</span>: <span class="json-string">"serial"</span>,<br/>
                                &nbsp;&nbsp;<span class="json-key">"payload"</span>: <span class="json-brace">{</span><br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"pm25"</span>: <span class="json-number">12.5</span>,<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"pm10"</span>: <span class="json-number">18.2</span>,<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"co_ppm"</span>: <span class="json-number">0.5</span>,<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"lpg_ppm"</span>: <span class="json-number">200.0</span>,<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"temp_c"</span>: <span class="json-number">26.5</span>,<br/>
                                &nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"humid_p"</span>: <span class="json-number">60.0</span><br/>
                                &nbsp;&nbsp;<span class="json-brace">}</span><br/>
                                <span class="json-brace">}</span>
                            </div>
                            
                            <div class="mt-auto pt-4 border-t border-gray-800 text-xs text-green-400 flex items-center">
                                <i class="fas fa-check-circle mr-2"></i> JSON Parse OK (128 bytes)
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="absolute top-1/2 left-1/4 transform -translate-y-1/2 w-[600px] h-[600px] bg-blue-900 rounded-full opacity-5 filter blur-[120px] pointer-events-none z-0"></div>
        <div class="absolute bottom-0 right-0 w-96 h-96 bg-yellow-900 rounded-full opacity-10 pointer-events-none filter blur-[100px] z-0"></div>

        <button onclick="toggleFullScreen()" 
                class="fixed bottom-6 right-6 p-3 bg-gray-700 hover:bg-gray-600 text-white rounded-full shadow-lg border border-gray-500 transition-colors z-50 opacity-50 hover:opacity-100"
                title="Tela Cheia">
            <i class="fas fa-expand"></i>
        </button>
    </div>

    <script>
        function toggleFullScreen() {
            var elem = document.documentElement;
            if (!document.fullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }
        }
    </script>
</body>
</html>